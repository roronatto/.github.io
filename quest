<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>廣瀬と村田の大冒険</title>
    <style>
        body {
            text-align: center;
            padding: 50px;
            background-color: #1f1f1f;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        h1 {
            font-size: 36px;
            letter-spacing: 3px;
        }

        #heroDescription {
            margin-top: 30px;
            font-size: 18px;
            line-height: 1.5;
        }

        #nextButton {
            background-color: #3498db;
            color: #fff;
            padding: 10px 20px;
            font-size: 18px;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }

        #nextButton:hover {
            background-color: #2980b9;
        }

        #result {
            margin-top: 30px;
            font-size: 24px;
            font-weight: bold;
        }

        #praise {
            margin-top: 20px;
            font-size: 18px;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <h1>廣瀬と村田の大冒険</h1>

    <div id="heroDescription"></div>

    <button id="nextButton" onclick="playJanken()">次へ</button>

    <div id="result"></div>

    <div id="praise"></div>

    <audio id="fanfare" src="fanfare.mp3"></audio>
    <audio id="applause" src="applause.mp3"></audio>

    <script>
        // 前の画面で入力された名前を取得
        var characterName = localStorage.getItem("characterName");

        // 入力された名前に基づいて英雄的な説明を作成
        var heroDescription = "勇者 " + characterName + "、世界に名を刻め！" +
                              "勇者の武勇伝は遠くに轟き、その名を聞いた者たちは恐れおののきます。" +
                              "魔物の討伐や困難な冒険を乗り越え、" +
                              "彼/彼女の勇者としての伝説は未知なる大冒険に続いています。" +
                              "※あなたは廣瀬嘉村田であり、主人公ではありません。";

        // 説明を表示
        document.getElementById("heroDescription").innerHTML = heroDescription;

        function playJanken() {
            var choices = ["グー", "チョキ", "パー"];
            var userChoice = prompt("じゃんけんを始めます！\nグー、チョキ、またはパーを入力してください。");

            if (userChoice) {
                userChoice = userChoice.toLowerCase();
                if (choices.includes(userChoice)) {
                    var computerChoice = choices[Math.floor(Math.random() * 3)];

                    // 勝敗の判定
                    var result = jankenResult(userChoice, computerChoice);

                    // 結果の表示
                    document.getElementById("result").innerHTML = "勇者 " + characterName + " の選択: " + userChoice + "<br>" +
                                                                   "魔物の選択: " + computerChoice + "<br>" +
                                                                   "結果: " + result;

                    if (result === "勝利") {
                        // 勝利時の処理
                        document.getElementById("praise").innerHTML = "素晴らしい！ " + characterName + " 、あなたは真の勇者です！";
                        playFanfare();
                        playApplause();
                    } else {
                        // 敗北時の処理
                        document.getElementById("praise").innerHTML = "残念ながら " + characterName + " 、魔物に負けてしまいました。";
                        alert("残念ながら魔物に負けてしまいました。ゲームを終了します。");
                        window.close();
                    }
                } else {
                    alert("正しい値を入力してください。");
                }
            } else {
                alert("キャンセルされました。");
            }
        }

        function jankenResult(user, computer) {
            if ((user === "グー" && computer === "チョキ") ||
                (user === "チョキ" && computer === "パー") ||
                (user === "パー" && computer === "グー")) {
                return "勝利";
            } else if (user === computer) {
                return "引き分け";
            } else {
                return "敗北";
            }
        }

        function playFanfare() {
            document.getElementById("fanfare").play();
        }

        function playApplause() {
            document.getElementById("applause").play();
        }
    </script>

</body>
</html>
